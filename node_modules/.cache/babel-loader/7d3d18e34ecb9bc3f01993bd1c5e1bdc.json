{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\nvar Symbol = global['jest-symbol-do-not-touch'] || global.Symbol;\nvar Symbol = global['jest-symbol-do-not-touch'] || global.Symbol;\nvar Promise = global[Symbol.for('jest-native-promise')] || global.Promise;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nclass CancelError extends Error {\n  constructor() {\n    super('Promise was canceled');\n    this.name = 'CancelError';\n  }\n\n}\n\nclass PCancelable extends Promise {\n  constructor(executor) {\n    super(resolve => resolve());\n\n    _defineProperty(this, '_pending', true);\n\n    _defineProperty(this, '_canceled', false);\n\n    _defineProperty(this, '_promise', void 0);\n\n    _defineProperty(this, '_cancel', void 0);\n\n    _defineProperty(this, '_reject', () => {});\n\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      return executor(fn => {\n        this._cancel = fn;\n      }, val => {\n        this._pending = false;\n        resolve(val);\n      }, err => {\n        this._pending = false;\n        reject(err);\n      });\n    });\n  }\n\n  then(onFulfilled, onRejected) {\n    return this._promise.then(onFulfilled, onRejected);\n  }\n\n  catch(onRejected) {\n    return this._promise.catch(onRejected);\n  }\n\n  cancel() {\n    if (!this._pending || this._canceled) {\n      return;\n    }\n\n    if (typeof this._cancel === 'function') {\n      try {\n        this._cancel();\n      } catch (err) {\n        this._reject(err);\n      }\n    }\n\n    this._canceled = true;\n\n    this._reject(new CancelError());\n  }\n\n}\n\nexports.default = PCancelable;","map":{"version":3,"sources":["/Users/wemi/jammming/node_modules/jest-jasmine2/build/PCancelable.js"],"names":["Object","defineProperty","exports","value","default","Symbol","global","Promise","for","_defineProperty","obj","key","enumerable","configurable","writable","CancelError","Error","constructor","name","PCancelable","executor","resolve","_promise","reject","_reject","fn","_cancel","val","_pending","err","then","onFulfilled","onRejected","catch","cancel","_canceled"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.default = void 0;\nvar Symbol = global['jest-symbol-do-not-touch'] || global.Symbol;\nvar Symbol = global['jest-symbol-do-not-touch'] || global.Symbol;\nvar Promise = global[Symbol.for('jest-native-promise')] || global.Promise;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nclass CancelError extends Error {\n  constructor() {\n    super('Promise was canceled');\n    this.name = 'CancelError';\n  }\n}\n\nclass PCancelable extends Promise {\n  constructor(executor) {\n    super(resolve => resolve());\n\n    _defineProperty(this, '_pending', true);\n\n    _defineProperty(this, '_canceled', false);\n\n    _defineProperty(this, '_promise', void 0);\n\n    _defineProperty(this, '_cancel', void 0);\n\n    _defineProperty(this, '_reject', () => {});\n\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n      return executor(\n        fn => {\n          this._cancel = fn;\n        },\n        val => {\n          this._pending = false;\n          resolve(val);\n        },\n        err => {\n          this._pending = false;\n          reject(err);\n        }\n      );\n    });\n  }\n\n  then(onFulfilled, onRejected) {\n    return this._promise.then(onFulfilled, onRejected);\n  }\n\n  catch(onRejected) {\n    return this._promise.catch(onRejected);\n  }\n\n  cancel() {\n    if (!this._pending || this._canceled) {\n      return;\n    }\n\n    if (typeof this._cancel === 'function') {\n      try {\n        this._cancel();\n      } catch (err) {\n        this._reject(err);\n      }\n    }\n\n    this._canceled = true;\n\n    this._reject(new CancelError());\n  }\n}\n\nexports.default = PCancelable;\n"]},"metadata":{},"sourceType":"script"}