{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.maybeAsync = maybeAsync;\nexports.forwardAsync = forwardAsync;\nexports.isThenable = isThenable;\nexports.waitFor = exports.onFirstPause = exports.isAsync = void 0;\n\nfunction _gensync() {\n  const data = require(\"gensync\");\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst id = x => x;\n\nconst runGenerator = _gensync()(function* (item) {\n  return yield* item;\n});\n\nconst isAsync = _gensync()({\n  sync: () => false,\n  errback: cb => cb(null, true)\n});\n\nexports.isAsync = isAsync;\n\nfunction maybeAsync(fn, message) {\n  return _gensync()({\n    sync(...args) {\n      const result = fn.apply(this, args);\n      if (isThenable(result)) throw new Error(message);\n      return result;\n    },\n\n    async(...args) {\n      return Promise.resolve(fn.apply(this, args));\n    }\n\n  });\n}\n\nconst withKind = _gensync()({\n  sync: cb => cb(\"sync\"),\n  async: cb => cb(\"async\")\n});\n\nfunction forwardAsync(action, cb) {\n  const g = _gensync()(action);\n\n  return withKind(kind => {\n    const adapted = g[kind];\n    return cb(adapted);\n  });\n}\n\nconst onFirstPause = _gensync()({\n  name: \"onFirstPause\",\n  arity: 2,\n  sync: function (item) {\n    return runGenerator.sync(item);\n  },\n  errback: function (item, firstPause, cb) {\n    let completed = false;\n    runGenerator.errback(item, (err, value) => {\n      completed = true;\n      cb(err, value);\n    });\n\n    if (!completed) {\n      firstPause();\n    }\n  }\n});\n\nexports.onFirstPause = onFirstPause;\n\nconst waitFor = _gensync()({\n  sync: id,\n  async: id\n});\n\nexports.waitFor = waitFor;\n\nfunction isThenable(val) {\n  return !!val && (typeof val === \"object\" || typeof val === \"function\") && !!val.then && typeof val.then === \"function\";\n}","map":{"version":3,"sources":["/Users/wemi/jammming/node_modules/@babel/core/lib/gensync-utils/async.js"],"names":["Object","defineProperty","exports","value","maybeAsync","forwardAsync","isThenable","waitFor","onFirstPause","isAsync","_gensync","data","require","id","x","runGenerator","item","sync","errback","cb","fn","message","args","result","apply","Error","async","Promise","resolve","withKind","action","g","kind","adapted","name","arity","firstPause","completed","err","val","then"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.maybeAsync = maybeAsync;\nexports.forwardAsync = forwardAsync;\nexports.isThenable = isThenable;\nexports.waitFor = exports.onFirstPause = exports.isAsync = void 0;\n\nfunction _gensync() {\n  const data = require(\"gensync\");\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst id = x => x;\n\nconst runGenerator = _gensync()(function* (item) {\n  return yield* item;\n});\n\nconst isAsync = _gensync()({\n  sync: () => false,\n  errback: cb => cb(null, true)\n});\n\nexports.isAsync = isAsync;\n\nfunction maybeAsync(fn, message) {\n  return _gensync()({\n    sync(...args) {\n      const result = fn.apply(this, args);\n      if (isThenable(result)) throw new Error(message);\n      return result;\n    },\n\n    async(...args) {\n      return Promise.resolve(fn.apply(this, args));\n    }\n\n  });\n}\n\nconst withKind = _gensync()({\n  sync: cb => cb(\"sync\"),\n  async: cb => cb(\"async\")\n});\n\nfunction forwardAsync(action, cb) {\n  const g = _gensync()(action);\n\n  return withKind(kind => {\n    const adapted = g[kind];\n    return cb(adapted);\n  });\n}\n\nconst onFirstPause = _gensync()({\n  name: \"onFirstPause\",\n  arity: 2,\n  sync: function (item) {\n    return runGenerator.sync(item);\n  },\n  errback: function (item, firstPause, cb) {\n    let completed = false;\n    runGenerator.errback(item, (err, value) => {\n      completed = true;\n      cb(err, value);\n    });\n\n    if (!completed) {\n      firstPause();\n    }\n  }\n});\n\nexports.onFirstPause = onFirstPause;\n\nconst waitFor = _gensync()({\n  sync: id,\n  async: id\n});\n\nexports.waitFor = waitFor;\n\nfunction isThenable(val) {\n  return !!val && (typeof val === \"object\" || typeof val === \"function\") && !!val.then && typeof val.then === \"function\";\n}"]},"metadata":{},"sourceType":"script"}