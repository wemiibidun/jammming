(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),c=a(10),i=a.n(c),o=(a(16),a(3)),u=a(4),l=a(2),h=a(6),d=a(5),p=(a(17),a(18),a(0)),m=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={term:""},n.search=n.search.bind(Object(l.a)(n)),n.handleTermChange=n.handleTermChange.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"search",value:function(){this.props.onSearch(this.state.term)}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"SearchBar",children:[Object(p.jsx)("input",{onChange:this.handleTermChange,placeholder:"Enter A Song, Album, or Artist"}),Object(p.jsx)("button",{className:"SearchButton",onClick:this.search,children:"SEARCH"})]})}}]),a}(s.a.Component),b=(a(20),a(21),a(22),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"renderAction",value:function(){return this.props.isRemoval?Object(p.jsx)("button",{className:"Track-action",onClick:this.removeTrack,children:"-"}):Object(p.jsx)("button",{className:"Track-action",onClick:this.addTrack,children:"+"})}},{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemove(this.props.track)}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"Track",children:[Object(p.jsxs)("div",{className:"Track-information",children:[Object(p.jsx)("h3",{children:this.props.track.name}),Object(p.jsxs)("p",{children:[this.props.track.artist," | ",this.props.track.album," "]})]}),this.renderAction()," "]})}}]),a}(s.a.Component)),f=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"TrackList",children:this.props.tracks.map((function(t){return Object(p.jsx)(b,{track:t,onAdd:e.props.onAdd,onRemove:e.props.onRemove,isRemoval:e.props.isRemoval},t.id)}))})}}]),a}(s.a.Component),j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"SearchResults",children:[Object(p.jsx)("h2",{children:"Results"}),Object(p.jsx)(f,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1})]})}}]),a}(s.a.Component),v=(a(23),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value)}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"Playlist",children:[Object(p.jsx)("input",{defaultValue:"New Playlist",onChange:this.handleNameChange}),Object(p.jsx)(f,{tracks:this.props.playlistTracks,onRemove:this.props.onRemove,isRemoval:!0}),Object(p.jsx)("button",{className:"Playlist-save",onClick:this.props.onSave,children:"SAVE TO SPOTIFY"})]})}}]),a}(s.a.Component)),k=a(7),y=a.n(k),O=a(8),g=a(11),T="6d7f450a2d294423a212e3874d46ad4f",x="127.0.0.1"===window.location.hostname?"http://127.0.0.1:3000/":"https://wemiibidun.github.io/jammming/",w=0,S=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="",n=0;n<e;n+=1)a+=t.charAt(Math.floor(Math.random()*t.length));return a},N=function(){var e=Object(O.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(new TextEncoder).encode(t),e.next=3,window.crypto.subtle.digest("SHA-256",a);case 3:return n=e.sent,e.abrupt("return",(r=n,btoa(String.fromCharCode.apply(String,Object(g.a)(new Uint8Array(r)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")));case 5:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),C={getAccessToken:function(){return Object(O.a)(y.a.mark((function e(){var t,a,r,s,c,i,o,u,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&Date.now()<w)){e.next=2;break}return e.abrupt("return",n);case 2:if(t=new URLSearchParams(window.location.search),a=t.get("code"),r=window.localStorage.getItem("spotify_code_verifier"),!a){e.next=17;break}return s=new URLSearchParams({client_id:T,grant_type:"authorization_code",code:a,redirect_uri:x,code_verifier:r||""}),e.next=9,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});case 9:return c=e.sent,e.next=12,c.json();case 12:return i=e.sent,n=i.access_token,w=Date.now()+1e3*(i.expires_in||0),window.history.replaceState({},document.title,window.location.pathname),e.abrupt("return",n);case 17:return o=S(64),e.next=20,N(o);case 20:return u=e.sent,window.localStorage.setItem("spotify_code_verifier",o),(l=new URL("https://accounts.spotify.com/authorize")).search=new URLSearchParams({response_type:"code",client_id:T,scope:"playlist-modify-public",redirect_uri:x,code_challenge_method:"S256",code_challenge:u}).toString(),window.location=l.toString(),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e)})))()},search:function(e){return Object(O.a)(y.a.mark((function t(){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getAccessToken();case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:return t.abrupt("return",fetch("https://api.spotify.com/v1/search?type=track&q=".concat(encodeURIComponent(e)),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,uri:e.uri}})):[]})));case 6:case"end":return t.stop()}}),t)})))()},savePlaylist:function(e,t){return Object(O.a)(y.a.mark((function a(){var n,r,s;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t.length){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,C.getAccessToken();case 4:if(n=a.sent){a.next=7;break}return a.abrupt("return");case 7:return r={Authorization:"Bearer ".concat(n)},a.abrupt("return",fetch("https://api.spotify.com/v1/me",{headers:r}).then((function(e){return e.json()})).then((function(a){return s=a.id,fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists"),{headers:r,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var a=e.id;return fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists/").concat(a,"/tracks"),{headers:r,method:"POST",body:JSON.stringify({uris:t})})}))})));case 9:case"end":return a.stop()}}),a)})))()}},P=C,R=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={searchResults:[],playlistName:"My Playlist",playlistTracks:[]},n.addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(l.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(l.a)(n)),n.search=n.search.bind(Object(l.a)(n)),n}return Object(u.a)(a,[{key:"addTrack",value:function(e){var t=this.state.playlistTracks;this.state.playlistTracks.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTracks:t}))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks;t=t.filter((function(t){return t.id!==e.id})),this.setState({playlistTracks:t})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"savePlaylist",value:function(){var e=this,t=this.state.playlistTracks.map((function(e){return e.uri}));P.savePlaylist(this.state.playlistName,t).then((function(){e.setState({playlistName:"New Playlist",playlistTracks:[]})}))}},{key:"search",value:function(e){var t=this;P.search(e).then((function(e){t.setState({searchResults:e})}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h1",{children:["Ja",Object(p.jsx)("span",{className:"highlight",children:"mmm"}),"ing"]}),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(m,{onSearch:this.search}),Object(p.jsxs)("div",{className:"App-playlist",children:[Object(p.jsx)(j,{searchResults:this.state.searchResults,onAdd:this.addTrack}),Object(p.jsx)(v,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onRemove:this.removeTrack,onNameChange:this.updatePlaylistName,onSave:this.savePlaylist})]})]})]})}}]),a}(s.a.Component),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,26)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(R,{})}),document.getElementById("root")),A()}],[[25,1,2]]]);
//# sourceMappingURL=main.2ae64c1a.chunk.js.map